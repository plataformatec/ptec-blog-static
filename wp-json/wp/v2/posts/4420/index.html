{"id":4420,"date":"2015-02-10T09:00:11","date_gmt":"2015-02-10T11:00:11","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=4420"},"modified":"2015-06-01T12:26:27","modified_gmt":"2015-06-01T15:26:27","slug":"introducing-discrete-integration","status":"publish","type":"post","link":"https:\/\/blog.plataformatec.com.br\/2015\/02\/introducing-discrete-integration\/","title":{"rendered":"Introducing Discrete Integration"},"content":{"rendered":"<p>Continuous Integration has been out there for some years by now. The book, <a href=\"http:\/\/www.amazon.com\/gp\/product\/0321336380?ie=UTF8&amp;tag=martinfowlerc-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=0321336380\">Continuous Integration: Improving Software Quality and Reducing Risk<\/a> dates from 2007, but the first mention of the term has came up <a href=\"http:\/\/en.wikipedia.org\/wiki\/Continuous_integration#History\">earlier in 1994<\/a>.<\/p>\n<p>So, it\u2019s been nearly 20 years since this idea is present in the software industry. During this time new tools, new practices and new possibilities appeared.<\/p>\n<p>\u201cContinuous Integration is a development practice that requires developers to integrate code into a shared repository several times a day. Each check-in is then verified by an automated build, allowing teams to detect problems early\u201d<sup id=\"fnref-ci\"><a href=\"#fn-ci\" rel=\"footnote\">(1)<\/a><\/sup>.<\/p>\n<p>Its main goal is to detect errors earlier so they can be fixed. It helps in delivering software faster, because it allows you to deploy small changes with higher confidence due to automated tests.<\/p>\n<p>Continuous Integration forces committing to the master branch and for each commit, tests are run in a production-like environment, a build is generated and outputs a deployable package.<\/p>\n<p>Here at Plataformatec we do not follow Continuous Integration, although we\u2019ve inherited some of its best practices. Some time ago, <a href=\"http:\/\/twitter.com\/rlmflores\">Rodrigo Flores<\/a> came out with the name of what we do, and since then, we\u2019re calling it <strong>Discrete Integration<\/strong>.<\/p>\n<p>Discrete, as in discrete mathematics, means we\u2019re working with fundamentally discrete structures rather than continuous, in other words, the objects studied by discrete mathematics do not vary smoothly, but have distinct, separated values<sup id=\"fnref-discrete-math\"><a href=\"#fn-discrete-math\" rel=\"footnote\">(2)<\/a><\/sup>.<\/p>\n<p>One of those objects studied by discrete mathematics are graphs which can be representations of git branches. Git branches are the core of discrete integration. But in order to elucidate some important points, let me give you some context of Continuous Integration.<\/p>\n<p>Continuous Integration adopters push code to master branch on a daily basis. Because of that, you\u2019re going to need a mechanism to hide incomplete code that is being pushed, such as <a href=\"http:\/\/martinfowler.com\/bliki\/FeatureToggle.html\">Feature Toggles<\/a>. In other words, you will need to prevent pieces of code to be executed because they\u2019re not yet ready for production.<\/p>\n<p>Using toggles increases the maintainability costs and adds complexity to the code and to the tests. It\u2019ll add technical debts along the development, since it needs to be removed. You\u2019ll need toggles in your front-end code too, like in Javascript and CSS. One of the problems here is that CSS doesn\u2019t support conditionals, so you end up with a lot of styles that will need to be removed in the end.<\/p>\n<p>So, at Plataformatec, we tend to use toggles just when it is really required. For instance in an incremental rollout of a feature or when someone wants to control, for some reason, the software behaviour. And that\u2019s because for Discrete Integration <strong>feature toggles are not necessary<\/strong>. Only fully implemented code is merged into the master branch.<\/p>\n<p>In order to keep your work tidy, <strong>branches need to be merged as soon as possible<\/strong>. I personally call it the \u201cminimum mergeable state\u201d. You can think of when a task is complete or a user story is done &#8211; actually, it can be done anytime -, but the idea is to reach this minimum state so that you avoid integration problems.<\/p>\n<p>To accomplish that, we use to shrink user stories to its smallest mergeable state. For instance, you could deliver firstly a page with a blog post form, then, you add a draft support, then an autosave feature and so on. Although autosave may be part of the draft feature, since autosave will be saved like a draft, it makes sense to be implemented afterwards. The three user stories are independent and deliverable, we\u2019re just iteratively incrementing.<\/p>\n<p>Sometimes, when pulling master\u2019s code, conflicts will happen, but there\u2019s nothing to do about it. What I mean is that <strong>Discrete Integration does not fear conflicts<\/strong>, since it is part of a developer work, although we do mitigate conflicts to happen.<\/p>\n<p>As stated, shrinking user stories is not enough, that\u2019s why <strong>Discrete Integration encourage developers to communicate<\/strong>. It can be done by a Chat tool, like Campfire, face to face, through Pull Requests or by a bit of each one. We even wrote a <a href=\"http:\/\/guidelines.plataformatec.com.br\/pull-requests.html\">guideline<\/a> where you can read more about its philosophies.<\/p>\n<p>For us, Pull Requests are an import source of knowledge sharing, it also spreads <a href=\"http:\/\/swreflections.blogspot.com.br\/2013\/04\/code-ownership-who-should-own-code.html\">collective code ownership<\/a>, allows asynchronous code architecture discussions, decreases bug ratios and increases engagement and business knowledge.<\/p>\n<p>It\u2019s worth pointing out that commits into the master branch still happens. Sometimes you need to fix a typo, change a configuration line or other small changes. Although we would still send the commit link or ask for review before pushing, we\u2019ve learned that it\u2019s important to communicate all the changes, even small ones.<\/p>\n<p>So, if you don\u2019t push code directly into the master branch, you\u2019re not using Continuous Integration by definition.<\/p>\n<p><em>How close are you to Discrete Integration? Which practices did you miss? Please, let us know in the comments below!<\/em><\/p>\n<div class=\"footnotes\">\n<hr>\n<ol>\n<li id=\"fn-ci\">\n      Fragment from http:\/\/www.thoughtworks.com\/continuous-integration.&nbsp;<a href=\"#fnref-ci\" rev=\"footnote\">\u21a9<\/a>\n    <\/li>\n<li id=\"fn-discrete-math\">\n      From http:\/\/en.wikipedia.org\/wiki\/Discrete_mathematics.&nbsp;<a href=\"#fnref-ci\" rev=\"footnote\">\u21a9<\/a>\n    <\/li>\n<\/ol>\n<\/div>\n<div style=\"padding:40px 0 20px;\">\n<a href=\"http:\/\/blog.plataformatec.com.br\/subscribe\/\"><img decoding=\"async\" src=\"http:\/\/blog.plataformatec.com.br\/wp-content\/uploads\/2014\/11\/subscribe-to-our-blog.png\" alt=\"Subscribe to our blog\" style=\"border:none;\" \/><\/a>\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>Continuous Integration has been out there for some years by now. The book, Continuous Integration: Improving Software Quality and Reducing Risk dates from 2007, but the first mention of the term has came up earlier in 1994. So, it\u2019s been nearly 20 years since this idea is present in the software industry. During this time &#8230; <a class=\"read-more-link\" href=\"https:\/\/blog.plataformatec.com.br\/2015\/02\/introducing-discrete-integration\/\">\u00bb<\/a><\/p>\n","protected":false},"author":28,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[234],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4420"}],"collection":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/28"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=4420"}],"version-history":[{"count":11,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4420\/revisions"}],"predecessor-version":[{"id":4718,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4420\/revisions\/4718"}],"wp:attachment":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=4420"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=4420"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=4420"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}