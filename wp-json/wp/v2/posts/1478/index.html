{"id":1478,"date":"2010-11-16T13:11:43","date_gmt":"2010-11-16T15:11:43","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=1478"},"modified":"2016-09-28T10:31:38","modified_gmt":"2016-09-28T13:31:38","slug":"cijoe-can-you-please-watch-my-windows","status":"publish","type":"post","link":"https:\/\/blog.plataformatec.com.br\/2010\/11\/cijoe-can-you-please-watch-my-windows\/","title":{"rendered":"CI JOE, can you please watch my windows?"},"content":{"rendered":"<p>Suppose you park your car in a neighborhood with a lot of occurrences of vandalism and crimes. If you return two weeks later, there is a good chance that you will find the car in the same state that it were when you left it there. \u00a0Now imagine if you parked the same car but with a broken window. There is a good chance that you will see an engineless car, without tires or many other parts. Of course, we did not conduct this social experiment, but we know about a theory called <a href=\"http:\/\/en.wikipedia.org\/wiki\/Broken_windows_theory\" target=\"_blank\">Broken windows theory<\/a> that says if we have something intact, it has a tendency to remain intact. But if we have something broken, there is a tendency that it will be even more damaged after some time.<\/p>\n<p>But how does it apply to software development? Suppose you have some developers working on a project with about a thousand tests covering all the code and all of them are passing. If a developer implements a feature and it breaks some tests, it seems reasonable that he will make an effort to make the necessary modifications so all tests pass, or maybe he&#8217;ll remove them if they don&#8217;t make sense anymore. Also, it is expected that he will write new tests to cover the new feature.<\/p>\n<p>Now suppose a different scenario: the project has a thousand tests and a hundred of them are not passing. Even worse, the code coverage is about 70%. As the developer writes the new feature, there is a tendency that he may not create tests and not fix the broken tests that this implementation caused. There is an analogy with the broken windows and failing tests: if you allow a failing test to stay there, there is a good chance that your team may not work on correcting tests and the number of failing tests may increase during time, leading to a poor quality software.<\/p>\n<p>OK, you have heard about the problem, but how can we solve that? A first idea is to hire a monkey that keeps an eye in the version control, and everytime there is an update there, it presses a key that runs all the tests. The monkey is actually very smart and it will scream if it sees red F&#8217;s in the screen. And every time the monkey screams, you know that somebody commited a broken test and you also know that every commit will make the monkey scream. So it&#8217;s time to fix the broken test. But you may have problems with Greenpeace doing that. So, it is a good idea to have something that does not depend on living animals. So maybe a robot? Yes, this is what we call Continuous Integration tools.<\/p>\n<p><a href=\"http:\/\/en.wikipedia.org\/wiki\/Continuous_integration\" target=\"_blank\">Continuous integration<\/a> is what we call the process where developers integrate their codes continuously. Continuous Integration tool is an application that executes the build every time it is updated in the version control. This build can watch for compilation\/interpretations errors, not passing tests, performance issues or anything you may think reasonable to watch.<\/p>\n<p>There are lots of continuos integration solutions suitable for Ruby (and consequently Ruby on Rails). Some java-based (<a href=\"http:\/\/hudson-ci.org\/\" target=\"_blank\">Hudson<\/a>) or some in Ruby (<a href=\"http:\/\/cruisecontrolrb.thoughtworks.com\/\" target=\"_blank\">Cruise Control rb<\/a> or <a href=\"https:\/\/github.com\/dcrec1\/signal\" target=\"_blank\">Signal<\/a>). We tried using Signal at first, but we have some problems related to the gem environment (we could not make it change the environment to the project gemset instead of the Signal gemset environment). So we tried the minimalistic <a href=\"https:\/\/github.com\/defunkt\/cijoe\" target=\"_blank\">CI JOE<\/a>.<\/p>\n<p>CI JOE is a CI server created by the Githubber <a href=\"http:\/\/chriswanstrath.com\/\" target=\"_blank\">Chris Wanstrath<\/a>. It is sinatra based and does not need even a database to run: all of its configurations are recorded in the .git\/config file and it uses git hooks to run the desired actions. There are only two requirements: your project must use git for version control, and the build should return a zero shell status for success and anything different than zero for not successful builds. You can use it with any programming language or framework. I strongly encourage you to configure to pull the build trigger every time you do a git push (you can do that simply doing a POST to a URL).<\/p>\n<p>The most awesome thing about CI JOE is that it is dead simple to configure it to do almost anything. You can configure Campfire notifications, e-mail deliveries or an alarming buzzing when it fails. The only requirement is that a shell command exists (if it requires a sequence a of shell commands, you can join them using &#8216;;&#8217;). A great idea is to integrate electric devices like leds, buzzers or even a <a href=\"https:\/\/github.com\/blog\/653-our-new-build-status-indicator\" target=\"_blank\">semaphore<\/a>.<\/p>\n<p>The project comprehensive <a href=\"https:\/\/github.com\/defunkt\/cijoe\" target=\"_blank\">README<\/a> has a lot of examples, including how to protect it with HTTP basic authentication or how to configure a queue of build requests. For our projects, we usually customize it by setting a git after-reset hook to execute &#8220;bundle install&#8221; (it always execute this git hook before the build starts) and then we modify the html template to include the project logo. Next, CI is ready to rock and roll!<\/p>\n<p>And you? What do you think about CI JOE? Are you customizing it in any way? Are you using another CI solution for your Ruby on Rails projects?<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Suppose you park your car in a neighborhood with a lot of occurrences of vandalism and crimes. If you return two weeks later, there is a good chance that you will find the car in the same state that it were when you left it there. \u00a0Now imagine if you parked the same car but &#8230; <a class=\"read-more-link\" href=\"https:\/\/blog.plataformatec.com.br\/2010\/11\/cijoe-can-you-please-watch-my-windows\/\">\u00bb<\/a><\/p>\n","protected":false},"author":12,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[122,120],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1478"}],"collection":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/12"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=1478"}],"version-history":[{"count":31,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1478\/revisions"}],"predecessor-version":[{"id":5708,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1478\/revisions\/5708"}],"wp:attachment":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=1478"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=1478"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=1478"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}