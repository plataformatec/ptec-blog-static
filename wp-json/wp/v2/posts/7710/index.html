{"id":7710,"date":"2018-07-30T14:52:00","date_gmt":"2018-07-30T17:52:00","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=7710"},"modified":"2018-07-30T15:13:15","modified_gmt":"2018-07-30T18:13:15","slug":"stop-hiding-the-error-and-start-fixing-the-problem","status":"publish","type":"post","link":"http:\/\/blog.plataformatec.com.br\/2018\/07\/stop-hiding-the-error-and-start-fixing-the-problem\/","title":{"rendered":"Stop hiding the error and start fixing the problem"},"content":{"rendered":"<p>I&#8217;ve been working on Plataformatec for 5 years and one common mistake that I see developers making is hiding the error, instead of fixing the problem. This kind of behaviour can turn your product full of problems quickly by having a codebase with unnecessary defensive programming. Let&#8217;s explore that by taking a look at an example from the real world.<\/p>\n<p>In some period of time, we&#8217;re working on an address autocomplete feature using Google places. Suddenly, we receive an error report complaining about an undefined object in Javascript. Something like this:<\/p>\n<pre><code>Uncaught TypeError: Cannot read property 'maps' of undefined\n<\/code><\/pre>\n<p>A developer looked at the stacktrace, then, found the problematic line. The line was something like this:<\/p>\n<pre><code class=\"javascript\">const autocomplete = new google.maps.places.Autocomplete(input, options);\n<\/code><\/pre>\n<p>After a moment, the developer opened a Pull Request like this:<\/p>\n<pre><code>\/\/ Sometimes google is undefined\nif (google) {\nconst autocomplete = new google.maps.places.Autocomplete(input, options);\n}\n<\/code><\/pre>\n<p>Can you say if it&#8217;s a good solution? I can say it&#8217;s an answer. Sometimes this kind of code can be a solution. However, when I see a solution like this, too easy, it sets my spidey sense off. Let&#8217;s see why it&#8217;s not good.<\/p>\n<p>That code initializes the Autocomplete widget. It means, when <code>google<\/code> is undefined, the address suggestion is not working. The <code>if<\/code> might prevent an error report, but it won&#8217;t fix the problem. This version now is worse than the previous one. Why? Now, users still can&#8217;t have the address suggestion and the team will not be aware of the problem. The code is hiding the error, not fixing the users&#8217; problem.<\/p>\n<p>You might think it was a junior mistake, but I can tell you, I could see many developers with many years of experience doing that. Everybody can make a mistake, that\u2019s why we have a process of reviewing other people\u2019s code to prevent errors like this.<\/p>\n<p>A bad context can make a good professional produce poor results. If the leader presses the team to make the errors reports go down fast, mistakes like that become more common. People start finding the easiest way of stopping that error of being reported.<\/p>\n<blockquote class=\"twitter-tweet\" data-lang=\"en\">\n<p dir=\"ltr\" lang=\"en\">\u201cPeople with targets [\u2026] will probably meet the targets &#8211; even if they have to destroy the enterprise to do it.\u201d \u2013 Deming <a href=\"https:\/\/t.co\/EJZLIZ50zT\">pic.twitter.com\/EJZLIZ50zT<\/a><\/p>\n<p>\u2014 Lindsay Holmwood \ud83d\udda4\ud83e\udde1\u2764 (@auxesis) <a href=\"https:\/\/twitter.com\/auxesis\/status\/828205291728625664?ref_src=twsrc%5Etfw\">February 5, 2017<\/a><\/p><\/blockquote>\n<p><script async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"><\/script><\/p>\n<p>The target should not be reducing the errors reported. The goal should be fixing the users&#8217; problems. For every bug reported by a bug track tool, ask yourself: Which problem is it generating for users? Then, make that problem your target to fix, not the error reported. This mindset that generates better solutions, a better product, a better codebase.<\/p>\n<p>If you are curious to know a good solution for the example problem, I&#8217;ll explain to you. That Autocomplete class is provided by a third party script included in the HTML document. The problem was a race condition. Our code was executing faster than the script being loaded and available. A good fix for that would be only executing that code after the Google&#8217;s script initialization. Thankfully, you can pass a function to be executed as an argument to Google&#8217;s script inclusion. Example:<\/p>\n<pre><code>&lt;script src=\"https:\/\/maps.googleapis.com\/maps\/api\/js?key=YOUR_API_KEY&amp;libraries=places&amp;callback=initAutocomplete\" async defer&gt;&lt;\/script&gt;\n<\/code><\/pre>\n<p>We passed the function<code>initAutocomplete<\/code> to initialize our address suggestion widget. It&#8217;s a good answer that fixes the user&#8217;s problem. It does not hide the error.<\/p>\n<p>Every time you see a solution for an error, ask yourself: is that really fixing the problem? Try to figure out how that error impacts the end users. Remember, is better having errors reported than invisible problems. Avoid defensive code that hides errors instead of fixing them.<\/p>\n","protected":false},"excerpt":{"rendered":"<p>I&#8217;ve been working on Plataformatec for 5 years and one common mistake that I see developers making is hiding the error, instead of fixing the problem. This kind of behaviour can turn your product full of problems quickly by having a codebase with unnecessary defensive programming. Let&#8217;s explore that by taking a look at an &#8230; <a class=\"read-more-link\" href=\"http:\/\/blog.plataformatec.com.br\/2018\/07\/stop-hiding-the-error-and-start-fixing-the-problem\/\">\u00bb<\/a><\/p>\n","protected":false},"author":31,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[293,143,7],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/7710"}],"collection":[{"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/31"}],"replies":[{"embeddable":true,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=7710"}],"version-history":[{"count":3,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/7710\/revisions"}],"predecessor-version":[{"id":7713,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/7710\/revisions\/7713"}],"wp:attachment":[{"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=7710"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=7710"},{"taxonomy":"post_tag","embeddable":true,"href":"http:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=7710"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}