{"id":817,"date":"2010-03-10T16:03:05","date_gmt":"2010-03-10T19:03:05","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=817"},"modified":"2010-04-22T14:55:40","modified_gmt":"2010-04-22T17:55:40","slug":"show-your-objects-baby","status":"publish","type":"post","link":"https:\/\/blog.plataformatec.com.br\/2010\/03\/show-your-objects-baby\/","title":{"rendered":"Show your objects baby!"},"content":{"rendered":"<p>We have been having some projects lately that needed a lot of admin CRUDs and pages showing a list of attributes, and we were getting bored of copy and paste code like this in our show pages, for every single attribute:<\/p>\n<pre lang=\"ruby\">\r\n<p>\r\n  <strong class=\"label\">Name<\/strong><br \/>\r\n  <%= @person.name %>\r\n<\/p>\r\n<\/pre>\n<p>We had already created some helper to do the work for us, but having this helper being copied from one project to another wasn&#8217;t that DRY. That&#8217;s when we decided to create <a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a>.<\/p>\n<p><a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> is a DSL to help you showing a list of attributes, with I18n, perfect for show pages in CRUD interfaces. It allows you to replace code\/html duplication in your views using a nice syntax. Let&#8217;s see what we can do.<\/p>\n<h3>Attributes<\/h3>\n<p>Let&#8217;s imagine we have a Person model, which has first_name, last_name, age, photo, and confirmed attributes. The following lines show a list of values for a specific person:<\/p>\n<pre lang=\"ruby\">\r\n<% show_for @person do |p| %>\r\n  <%= p.attribute :first_name %>\r\n  <%= p.attribute :last_name %>\r\n  <%= p.attribute :confirmed? %>\r\n  <%= p.attribute :created_at, :format => :short %>\r\n  <%= p.attribute :age, :if_blank => \"No age\" %>\r\n\r\n  <% p.attribute :photo do %>\r\n    <%= image_tag(@person.photo_url) %>\r\n  <% end %>\r\n<% end %>\r\n<\/pre>\n<p>Here is an example output you will get:<\/p>\n<pre lang=\"html\">\r\n<div class=\"show_for person\" id=\"person_1\">\r\n  <p class=\"wrapper person_first_name\"><strong class=\"label\">First name<\/strong><br \/>Carlos<\/p>\r\n  <p class=\"wrapper person_last_name\"><strong class=\"label\">Last name<\/strong><br \/>Antonio<\/p>\r\n  <p class=\"wrapper person_confirmed\"><strong class=\"label\">Confirmed?<\/strong><br \/>Yes<\/p>\r\n  <p class=\"wrapper person_created_at\"><strong class=\"label\">Created at<\/strong><br \/>08 Mar 11:30<\/p>\r\n  <p class=\"wrapper person_age\"><strong class=\"label\">Age<\/strong><br \/>24<\/p>\r\n  <p class=\"wrapper person_photo\"><strong class=\"label\">Photo<\/strong><br \/>\r\n    <img decoding=\"async\" alt=\"Rails\" src=\"\/images\/rails.png?1268047643\" \/>\r\n  <\/p>\r\n<\/div>\r\n<\/pre>\n<p>As you can see, you are going to get a default html markup, with classes and ids to help you design with CSS. And if you noticed, we are using extra options in some attributes, lets take a look at some of them:<\/p>\n<ul>\n<li><code>:format<\/code> lets you pass any format that will be used together with i18n, for date\/time attributes only, as you would use with the <code>l<\/code> helper.<\/li>\n<li><code>:if_blank<\/code> specifies what to show if the attribute is blank. It may have a default value from i18n.<\/li>\n<li><code>do...end<\/code>: using blocks you can handle the content for that specific attribute by yourself, as we have done in this example for the <code>photo<\/code> attribute.<\/li>\n<\/ul>\n<p>Boolean attributes, as our <code>:confirmed<\/code>, also have a default for <code>true<\/code> and <code>false<\/code> values, and can be configured through i18n. If you want to say &#8220;Yup&#8221; and &#8220;Nope&#8221; instead of &#8220;Yes&#8221; and &#8220;No&#8221; respectively, just change your i18n file. You can also pass a <code>:escape<\/code> option to not escape the value (<code>true<\/code> by default).<\/p>\n<h3>Associations<\/h3>\n<p><a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> also works with associations. For instance, we can easily add that a Person belongs to a City with a name attribute and that it has and belongs to many Tags. To handle the former, we can do:<\/p>\n<pre lang=\"ruby\">\r\n<%= p.association :city %>\r\n<\/pre>\n<p><a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> will guess the right attribute to show by looking into all possibilities configured in <code>ShowFor.association_methods<\/code> and in this case choosing :name. But of course, you can change it as you need, on-the-fly:<\/p>\n<pre lang=\"ruby\">\r\n<%= p.association :city, :using => :full_name %>\r\n<%= p.attribute :full_name, :in => :city %>\r\n<\/pre>\n<p>Both calls above will have the same output, just choose the one which suits you better. <\/p>\n<p>Handling collections is easy as belongs_to associations. You can just pass the association to <a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> and it will know whether it&#8217;s a collection or not, generating a list of elements using <code>ul<\/code> and <code>li<\/code> tags.<\/p>\n<pre lang=\"ruby\">\r\n<%= p.association :tags %>\r\n<\/pre>\n<p>However, if you want to render the collection inline, you can use :to_sentence or :join as options:<\/p>\n<pre lang=\"ruby\">\r\n<%= p.association :tags, :to_sentence => true %>\r\n<%= p.association :tags, :join => ',' %>\r\n<\/pre>\n<p>It&#8217;s also possible to pass a block to the collection. <a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> will create the wrapper tag (<code>ul<\/code> by default in this case) and will <code>yield<\/code> each element in the collection for you to handle it:<\/p>\n<pre lang=\"ruby\">\r\n<% a.association :tags do |tag| %>\r\n  <li><%= link_to tag.name, tag %><\/li>\r\n<% end %>\r\n<\/pre>\n<h3>Labels<\/h3>\n<p>You may have noticed <a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> has a default label using the <code>strong<\/code> html tag. It also exposes you this as a  helper, so you can use it whenever you wish:<\/p>\n<pre lang=\"ruby\">\r\n  <%= p.label :first_name %>\r\n  <%= p.label :age, :id => 'person_age' %>\r\n\r\n  <strong class=\"label\">First name<\/strong>\r\n  <strong class=\"label\" id=\"person_age\">Age<\/strong>\r\n<\/pre>\n<h3>Installation<\/h3>\n<p><a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> is already compatible with Rails 3, at the time of this writing in version 0.2.0. You can just follow the instructions in the <a href=\"http:\/\/github.com\/plataformatec\/show_for\/blob\/master\/README.rdoc\">README<\/a> to get it installed.<\/p>\n<p>If you are using Rails 2.3.x, take a look at the <a href=\"http:\/\/github.com\/plataformatec\/show_for\/tree\/v0.1\">0.1 branch<\/a>, and follow the installations in the <a href=\"http:\/\/github.com\/plataformatec\/show_for\/blob\/v0.1\/README.rdoc\">README<\/a> for this branch to get it up and running.<\/p>\n<p>Please don&#8217;t forget to run the generator and take a look at the initializer, it will allows you configure several parts of <a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a>.<\/p>\n<pre lang=\"ruby\">\r\nscript\/generate show_for_install\r\n<\/pre>\n<h3>Closing<\/h3>\n<p><a href=\"http:\/\/github.com\/plataformatec\/show_for\" title=\"ShowFor - Wrap your objects with a helper to easily show them\">ShowFor<\/a> helps you to show your objects easily with a default html markup, and can be totally configured to suit your needs. It has been helping us in every project, and we hope it may help you too. If you have any doubt, please take a look at the <a href=\"http:\/\/github.com\/plataformatec\/show_for\/blob\/master\/README.rdoc\">README<\/a>, there are a lot of examples and documentation there.<\/p>\n<p>And what about you? Do you have any helper you use every single day that might be transformed in a plugin\/gem? Do not hesitate on doing this, we would be glad to see your work.<\/p>\n<p>Enjoy!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>We have been having some projects lately that needed a lot of admin CRUDs and pages showing a list of attributes, and we were getting bored of copy and paste code like this in our show pages, for every single attribute: Name We had already created some helper to do the work for us, but &#8230; <a class=\"read-more-link\" href=\"https:\/\/blog.plataformatec.com.br\/2010\/03\/show-your-objects-baby\/\">\u00bb<\/a><\/p>\n","protected":false},"author":7,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[23,7,79],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/817"}],"collection":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/7"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=817"}],"version-history":[{"count":16,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/817\/revisions"}],"predecessor-version":[{"id":907,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/817\/revisions\/907"}],"wp:attachment":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=817"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=817"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=817"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}