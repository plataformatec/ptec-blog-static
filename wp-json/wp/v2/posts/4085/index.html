{"id":4085,"date":"2016-07-13T19:35:57","date_gmt":"2016-07-13T22:35:57","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=4085"},"modified":"2018-09-24T14:48:23","modified_gmt":"2018-09-24T17:48:23","slug":"key-points-to-consider-when-doing-a-big-software-refactoring","status":"publish","type":"post","link":"https:\/\/blog.plataformatec.com.br\/2016\/07\/key-points-to-consider-when-doing-a-big-software-refactoring\/","title":{"rendered":"Key points to consider when doing a big software refactoring"},"content":{"rendered":"<div style=\"text-align:center;font-size:.8em;color:#999;font-style:italic;margin-top:15px;\">\nThe second post of Low Internal Software Quality series.\n<\/div>\n<p>Doing a big software refactor<sup id=\"fnref-refactor\"><a href=\"#fn-refactor\" rel=\"footnote\">1<\/a><\/sup> is not a simple thing. There are lots of points that you should think about, from planning and prioritizing to team motivation and execution. Understanding these points in a structured and clear way is part of the job. The good news is that we\u2019ve been in that situation before and have learned the key points you should worry about.<\/p>\n<p>Here are the main points you should consider when planning and executing a big refactoring process.<\/p>\n<h3>Define your business goals<\/h3>\n<p>A big software refactoring process should not be started without clear business goals, otherwise it can suffer from a lack of commitment by your stakeholders. Here are some examples of goals:<\/p>\n<ul>\n<li>We&#8217;re doing a refactor so that we can plug in multiple payment gateways.<\/li>\n<li>We&#8217;re doing a refactor so that we can improve velocity.<\/li>\n<li>We&#8217;re doing a refactor so that we can have a multi-tenant architecture in order to simplify our infrastructure operations.<\/li>\n<\/ul>\n<h3>Measure progress<\/h3>\n<p>By its very nature, a software refactoring process is a technical effort, which is why it&#8217;s common for people not to measure its progress in the same structured way that they measure progress on development of new features. Don&#8217;t fall into that trap.<\/p>\n<p>As with every task in a project, a refactor should always be planned and <a href=\"http:\/\/blog.plataformatec.com.br\/2016\/02\/why-we-love-metrics-learning-with-lead-time\/\">measured<\/a>.<\/p>\n<h3>Pay attention to your team&#8217;s motivation<\/h3>\n<p>Working on a legacy codebase can be demotivating for developers, especially if they don&#8217;t have a feeling of progress, or if they don&#8217;t know when it&#8217;s going to end. When going with a refactoring process, you should keep this in mind.<\/p>\n<p>Show your team they&#8217;re moving forward. Plan for small deliverables, so that you can continually ship stuff and celebrate the good work done. Also, think about developer rotation, which can help by maintaining motivation and keeping fresh eyes on the task.<\/p>\n<h3>Define your approach: pull or push?<\/h3>\n<p>Are you going to improve your codebase only when touching some bad part of it, or are you going to proactively choose which parts you&#8217;re going to improve?<\/p>\n<h3>Prioritizing<\/h3>\n<p>If you have a clear business goal, it&#8217;s easier to proactively choose which parts need to be improved to make that goal a reality. With the parts listed, you can apply your usual prioritization techniques.<\/p>\n<p>But if you&#8217;re going to do a constant and big software refactor because you know the whole codebase needs to be improved, it&#8217;s more difficult to prioritize. This is because there are not just one or two main parts that need improvement, but lots of them. It&#8217;s difficult to know where to start.<\/p>\n<p>One way to prioritize in that situation is to instruct your team to evaluate which parts need to be refactored based on their complexity and churn. By that we mean, whenever they are evaluating if some part of the code should or should not be refactored, they should ask themselves:<\/p>\n<ul>\n<li>&#8220;Is the complexity of that class too high compared to the others?&#8221;<\/li>\n<li>&#8220;Do we constantly need to make changes on that file?&#8221;<\/li>\n<\/ul>\n<p>If the answers are both yes, that part is a good candidate for refactoring. Plot a chart of &#8220;class complexity X churn&#8221; and prioritize the parts that are too complex and that you&#8217;re changing every time.<\/p>\n<p>The parts that have big complexity but don&#8217;t need to change constantly are not good candidates to be refactored because they&#8217;re parts that are ugly but usually work, and nobody needs to change them to do their everyday job.<\/p>\n<h3>Know when you&#8217;re done<\/h3>\n<p>A software refactoring process can turn into an endless endeavor if you don&#8217;t plan, prioritize and measure progress. You should treat it as a project. It should have a beginning, a middle and an end.<\/p>\n<h3>Test suite coverage<\/h3>\n<p>Your refactoring process should improve stuff that is already working without breaking anything. Make sure you have good test coverage, otherwise the process can generate more bugs than quality improvements.<\/p>\n<h3>Test suite performance<\/h3>\n<p>If your test suite is too slow, it will slow down the refactoring process since a software refactor is greatly based on continuously running the tests. Make sure the test suite performance is not a bottleneck.<\/p>\n<h3>Sponsors commitment<\/h3>\n<p>A refactoring process can take a long time: weeks, months. During that time the velocity in which new features are delivered will be compromised. Make sure that every business stakeholder understands the goals and the nature of that kind of work, so that they don&#8217;t give up in the middle of it.<\/p>\n<p>What about you? Do you have any more tips on what to worry about when doing a big software refactor? Share with us!<\/p>\n<div style=\"padding: 0 15px 15px;border:dotted 1px #ccc;font-size:.8em;background-color:#f5f5f5;\">\n<h4 style=\"text-align:center;margin-bottom:2px;color:#666\">Posts of the Low Internal Software Quality series<\/h4>\n<ol>\n<li><a href=\"http:\/\/blog.plataformatec.com.br\/2014\/06\/the-symptoms-of-low-internal-software-quality\/\">The Symptoms of Low Internal Software Quality<\/a><\/li>\n<li>Key points to consider when doing a big software refactoring<\/li>\n<li><a href=\"http:\/\/blog.plataformatec.com.br\/2016\/07\/key-points-to-consider-when-doing-a-software-rewrite\/\">Key points to consider when doing a software rewrite<\/a><\/li>\n<\/ol>\n<\/div>\n<div class=\"footnotes\">\n<hr \/>\n<ol>\n<li id=\"fn-refactor\">\n<em>I prefer the term &#8220;code refurbishment,&#8221; but people aren\u2019t generally used to it. So I\u2019m using &#8220;refactor&#8221; in this blog post for the sake of clarity.&#160;<a href=\"#fnref-refactor\" rev=\"footnote\">&#8617;<\/a><\/em>\n<\/li>\n<\/ol>\n<\/div>\n<hr>\n","protected":false},"excerpt":{"rendered":"<p>The second post of Low Internal Software Quality series. Doing a big software refactor1 is not a simple thing. There are lots of points that you should think about, from planning and prioritizing to team motivation and execution. Understanding these points in a structured and clear way is part of the job. The good news &#8230; <a class=\"read-more-link\" href=\"https:\/\/blog.plataformatec.com.br\/2016\/07\/key-points-to-consider-when-doing-a-big-software-refactoring\/\">\u00bb<\/a><\/p>\n","protected":false},"author":5,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[205,217,15],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4085"}],"collection":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/5"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=4085"}],"version-history":[{"count":15,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4085\/revisions"}],"predecessor-version":[{"id":7798,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/4085\/revisions\/7798"}],"wp:attachment":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=4085"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=4085"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=4085"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}