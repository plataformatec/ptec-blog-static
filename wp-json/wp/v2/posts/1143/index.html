{"id":1143,"date":"2010-06-29T17:01:53","date_gmt":"2010-06-29T20:01:53","guid":{"rendered":"http:\/\/blog.plataformatec.com.br\/?p=1143"},"modified":"2015-02-25T15:07:27","modified_gmt":"2015-02-25T18:07:27","slug":"simpleform-forms-made-easy","status":"publish","type":"post","link":"https:\/\/blog.plataformatec.com.br\/2010\/06\/simpleform-forms-made-easy\/","title":{"rendered":"SimpleForm: forms made easy"},"content":{"rendered":"<p>Sometime ago we were working on a project together with a designer, and that specific application was full of forms, each one having a different layout, but most of them sharing the same features: inline errors, hints, specific label markup for required fields, etc. To start prototyping the application faster, we used the markup the designer created with similar forms, duplicating the code. But we don&#8217;t like code duplication, we weren&#8217;t feeling comfortable with it. So we decided to move on and create a tool to help us, that should be flexible enough to let us define the markup that fits better for each application, or even no extra markup at all. Here is SimpleForm!<\/p>\n<h3>SimpleForm inputs<\/h3>\n<p>From the README:<\/p>\n<blockquote><p>Forms made easy (for Rails)!<\/p>\n<p>SimpleForm aims to be as flexible as possible while helping you with powerful components to create your forms. The basic goal of simple form is to not touch your way of defining the layout, letting you find the better design for your eyes. Good part of the DSL was inherited from Formtastic, which we are thankful for and should make you feel right at home.<\/p><\/blockquote>\n<p>As the README says, <a href=\"http:\/\/github.com\/plataformatec\/simple_form\" title=\"SimpleForm on Github\">SimpleForm is a tool to help you build forms easily in Rails<\/a>. Let&#8217;s see some examples:<\/p>\n<pre><code class=\"ruby\">&lt;%= simple_form_for @user do |f| %&gt;\n  &lt;%= f.input :username, :label =&gt; 'Your username please' %&gt;\n  &lt;%= f.input :password, :hint =&gt; 'No special characters.' %&gt;\n  &lt;%= f.input :remember_me, :as =&gt; :boolean %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end -%&gt;\n<\/code><\/pre>\n<p>There are plenty of things going on here: we create a form using <code>simple_form_for<\/code> helper, then we use the <code>:input<\/code> method to create input elements based on column type. For instance, <code>:username<\/code> will create a default text input, while <code>:password<\/code> attribute will render an input type password. For the <code>:username<\/code> attribute, we are specifying a label manually. For <code>:password<\/code>, the label will be taken from I18n, and we are adding a hint message to the field. For <code>:remember_me<\/code>, we are explicitly saying to render it as a checkbox, using the <code>:as => :boolean<\/code> option (that is the default for boolean attributes). Also, there is a <code>button<\/code> helper that simply delegates to Rails helpers, in this case <code>submit<\/code>.<\/p>\n<p>The output for a new <code>@user<\/code> would be:<\/p>\n<pre><code class=\"html\">&lt;form action=\"\/users\" class=\"simple_form user\" id=\"new_user\" method=\"post\"&gt;\n  &lt;div class=\"input string required\"&gt;\n    &lt;label class=\"string required\" for=\"user_username\"&gt;&lt;abbr title=\"required\"&gt;*&lt;\/abbr&gt; Your username please&lt;\/label&gt;\n    &lt;input class=\"string required\" id=\"user_username\" maxlength=\"255\" name=\"user[username]\" size=\"50\" type=\"text\" \/&gt;\n  &lt;\/div&gt; \n  &lt;div class=\"input password required\"&gt;\n    &lt;label class=\"password required\" for=\"user_password\"&gt;&lt;abbr title=\"required\"&gt;*&lt;\/abbr&gt; Password&lt;\/label&gt;\n    &lt;input class=\"password required\" id=\"user_password\" name=\"user[password]\" size=\"30\" type=\"password\" \/&gt;\n    &lt;span class=\"hint\"&gt;No special characters.&lt;\/span&gt;\n  &lt;\/div&gt; \n  &lt;div class=\"input boolean optional\"&gt;\n    &lt;label class=\"boolean optional\" for=\"user_remember_me\"&gt; Remember me&lt;\/label&gt;\n    &lt;input name=\"user[remember_me]\" type=\"hidden\" value=\"0\" \/&gt;\n    &lt;input class=\"boolean optional\" id=\"user_remember_me\" name=\"user[remember_me]\" type=\"checkbox\" value=\"1\" \/&gt;\n  &lt;\/div&gt; \n  &lt;input id=\"user_submit\" name=\"commit\" type=\"submit\" value=\"Create User\" \/&gt; \n&lt;\/form&gt; \n<\/code><\/pre>\n<p>You may have noticed there is some additional css classes added to the markup, like <code>string<\/code> and <code>required<\/code>. They are added automatically by SimpleForm to help us style and plug some javascript in. There are specific css classes for each available input type. Also, pay some attention to the <code>label<\/code>: inside it there is an <code>abbr<\/code> tag with an asterisk (*) showing that the field is required. SimpleForm uses the new validations reflection API from Rails 3 to check if the attribute has the <code>presence<\/code> validator, and mark the field as required if so. And we are able to say that a field is required or disable the required mark, by passing the option <code>:required => true|false<\/code>.<\/p>\n<p>Furthermore, there is the <code>hint<\/code> tag for the <code>:password<\/code> attribute that SimpleForm creates based on the <code>:hint<\/code> option we have defined. Also notice that the gem has automatically added a <code>div<\/code> wrapper to each input, with the same css classes. SimpleForm allows us to configure this wrapper as well, using for instance <code>p<\/code> instead of <code>div<\/code>. We are going to see more about configuration later.<\/p>\n<p>SimpleForm is already prepared to generate some of the new HTML 5 input tags, such as <code>email<\/code>, <code>url<\/code> and <code>number<\/code> inputs:<\/p>\n<pre><code class=\"ruby\">&lt;%= simple_form_for @user do |f| %&gt;\n  &lt;%= f.input :website, :as =&gt; :url %&gt;\n  &lt;%= f.input :email %&gt;\n  &lt;%= f.input :age, :hint =&gt; \"This defaults to 'number' input based on field type\" %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end -%&gt;\n<\/code><\/pre>\n<p>Based on the attribute name, SimpleForm will generate <code>url<\/code> or <code>email<\/code> input types, and we can always set a specific type with the <code>:as<\/code> option. Numeric attributes will always be rendered as input type number.<\/p>\n<h3>Working with associations<\/h3>\n<p>SimpleForm adds a custom and straightforward method to render select tags for associations, called <code>association<\/code>. For now, consider our <code>User<\/code> belongs to a <code>Company<\/code>, and has and belongs to many <code>Roles<\/code>. Let&#8217;s go straight to the example:<\/p>\n<pre><code class=\"ruby\">&lt;%= simple_form_for @user do |f| %&gt;\n  &lt;%= f.input :name %&gt;\n  &lt;%= f.association :company %&gt;\n  &lt;%= f.association :roles %&gt;\n  &lt;%= f.button :submit %&gt;\n&lt;% end -%&gt;\n<\/code><\/pre>\n<p>It will detect the association type and render a <code>select<\/code> tag for choosing the company, listing all companies in the database, and another <code>select<\/code> for roles, with <code>multiple<\/code> option enabled.<\/p>\n<p>SimpleForm also has some add-ons, letting us render associations as a collection of radios or check boxes. Using the same example:<\/p>\n<pre><code class=\"ruby\">  f.association :company, :as =&gt; :radio\n  f.association :roles, :as =&gt; :check_boxes\n<\/code><\/pre>\n<p>Now we are rendering a collection of radios for choosing the <code>Company<\/code>, and another collection of check boxes for choosing <code>Roles<\/code>.<\/p>\n<h3>Configuration<\/h3>\n<p>SimpleForm lets us do some customizations by running its install generator:<\/p>\n<pre><code>rails generate simple_form:install\n\n# Output\n  create  config\/initializers\/simple_form.rb\n  create  config\/locales\/simple_form.en.yml\n  create  lib\/templates\/erb\/scaffold\/_form.html.erb\n<\/code><\/pre>\n<p>As we can see, running this generator will copy an initializer file, responsible for configuring SimpleForm; a locale file, to let us change some I18n messages; and a form template inside our lib dir. This template will be used instead of the default Rails scaffold form template, so it will create our form already using SimpleForm. Easy, right?<\/p>\n<p>Let&#8217;s take a look at some configuration options:<\/p>\n<ul>\n<li><strong>components<\/strong>: defines the components used by the form builder. We can remove any of them, change the order, or add new ones. Defaults to <code>[ :label, :input, :hint, :error ]<\/code>.<\/li>\n<li><strong>hint_tag<\/strong>: tag used for hints, defaults to <code>span<\/code>.<\/li>\n<li><strong>error_tag<\/strong>: tag used for errors, defaults to <code>span<\/code>.<\/li>\n<li><strong>wrapper_tag<\/strong>: tag used as wrapper to all inputs, defaults to <code>div<\/code><\/li>\n<li><strong>label_text<\/strong>: determines how the label text should be generated altogether with the required text. It must be a lambda\/proc that receives both label and required texts. Defaults to <code>\"required label\"<\/code>.<\/li>\n<\/ul>\n<p>There are a lot more options available in the initializer file, such as default input size and priority countries for generating country selects. Also, the locale file lets us determine the required text and mark, or even the entire required html tag.<\/p>\n<h3>Internationalization<\/h3>\n<p>SimpleForm is ready for I18n, supporting <code>labels<\/code> and <code>hints<\/code>. In addition, it lets us set different content for each action, <code>new<\/code> and <code>edit<\/code>. Here is an example locale file:<\/p>\n<pre><code class=\"yml\">en:\n  simple_form:\n    labels:\n      user:\n        username: 'User name'\n        password: 'Password'\n        edit:\n          username: 'Change user name'\n          password: 'Change password'\n    hints:\n      user:\n        username: 'User name to sign in.'\n        password: 'No special characters, please.'\n<\/code><\/pre>\n<p>Simple, right? If it does not find any specific translation using I18n for the <code>label<\/code>, it will fallback to <code>human_attribute_name<\/code>.<\/p>\n<h3>Here we go!<\/h3>\n<p>SimpleForm has much more to offer. We would like to invite you to take a <a href=\"http:\/\/github.com\/plataformatec\/simple_form\" title=\"SimpleForm on Github\">better look at the examples and possibilities<\/a>. Remember, SimpleForm aims to be flexible and powerful to help you easily build forms, without saying how you should create your markup.<\/p>\n<p>Also, feel free to explore the source code and extend SimpleForm even further. Since it&#8217;s based on components, creating a new component which moves the current hints to inside the input (using javascript or the new placehoder attribute in HTML 5), should be easy!<\/p>\n<p>It&#8217;s worth saying SimpleForm is Rails 3 compatible in the master branch. If you are using Rails 2.3.x, <a href=\"http:\/\/github.com\/plataformatec\/simple_form\/tree\/v1.0\" title=\"SimpleForm for Rails 2.3.x\">there is a v1.0 branch and version<\/a> that you might want to take a look.<\/p>\n<p>SimpleForm has been helping us a lot so far, we hope you enjoy it. Moreover, we would like to enjoy other tools that help your productivity day by day, please leave a comment and let us know, we would appreciate a lot!<\/p>\n","protected":false},"excerpt":{"rendered":"<p>Sometime ago we were working on a project together with a designer, and that specific application was full of forms, each one having a different layout, but most of them sharing the same features: inline errors, hints, specific label markup for required fields, etc. To start prototyping the application faster, we used the markup the &#8230; <a class=\"read-more-link\" href=\"https:\/\/blog.plataformatec.com.br\/2010\/06\/simpleform-forms-made-easy\/\">\u00bb<\/a><\/p>\n","protected":false},"author":7,"featured_media":0,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"ngg_post_thumbnail":0,"footnotes":""},"categories":[1],"tags":[82,67,92,23,7,115,105],"aioseo_notices":[],"jetpack_sharing_enabled":true,"jetpack_featured_media_url":"","_links":{"self":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1143"}],"collection":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/users\/7"}],"replies":[{"embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/comments?post=1143"}],"version-history":[{"count":30,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1143\/revisions"}],"predecessor-version":[{"id":4439,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/posts\/1143\/revisions\/4439"}],"wp:attachment":[{"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/media?parent=1143"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/categories?post=1143"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/blog.plataformatec.com.br\/wp-json\/wp\/v2\/tags?post=1143"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}